<div class="row">
  <div class="container-fluid">

  <% if current_user.role == "admin" %>
    <!-- Split button -->
    <div class="btn-group folder-options-button">
      <button type="button" class="btn btn-default">Folder Options</button>
      <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
        <span class="caret"></span>
        <span class="sr-only">Toggle Dropdown</span>
      </button>
      <ul class="dropdown-menu">
        <li><%= link_to 'Permissions', '#' %></li>
        <li role="seperator" class="divider"></li>
        <li><%= link_to 'Delete Folder', folder_path(@folder), method: :delete, data: {confirm: "Are you sure you want to delete this folder?"}, class: "danger" %></li>
      </ul>
    </div>
    
  <% end %>
    <button type="button" class="btn btn-lg btn-raised btn-primary" id="document-upload-button" data-toggle="modal" data-target="#documentUploadModal">Upload File</button>
      <%= render 'documents/document_upload_modal' %>
    <h2><%= @folder.name %></h2>
  </div>  
</div>

<div class="row">
  <div class="container-fluid">
    <% if @documents.count > 0 %>

      <!-- Display each document as panel -->
      <% @documents.each do |document| %>
        <% unless document.id == nil %>
          <div class="panel panel-default document-panel">
            <div class="panel-body document-panel-body">
              <div class="document-icon">
                <%= image_tag "#{document.file_content_type}" %>
              </div>
              <!-- Delete document link for admin -->
              <% if current_user.role == "admin" %>
                <%= link_to folder_document_path(@folder, document), remote: true, class: "document-delete", method: :delete, data: { confirm: "Are you sure?"} do %>
                  <i class="material-icons">clear</i>
                <% end %>
              <% end %>

              <div class="document-file-type">
                <% document.file_content_type %>
                <%= link_to "Download", document.file.url(:original, false) %>
              </div>
              <div class="document-edit">Edit in browser</div>
              <!-- MSWord https://writer.zoho.com/writer/remotedoc.im -->
              <!-- Excel  https://sheet.zoho.com/sheet/remotedoc.im -->
              <!-- Download -->
              <div class="document-name">
                <h4><%= document.name %></h4>
              </div>
              <div class="document-file-size">
                <%= number_to_human_size(document.file_file_size) %>
              </div>
              <div class="document-file-update-at">
                <span class="document-created-at">Created at: <%= document.created_at.strftime("%B %e, %Y") %></span>
                Last edited: <%= document.file_updated_at.strftime("%B %e, %Y") %>
              </div>
            </div>
          </div>
        <% end %>
      <% end %>
    <% else %>
      <!-- Message for empty folder -->
      <p>You have no files in this folder. Use the button above to upload a file.</p>
    <% end %>
  </div>
</div>